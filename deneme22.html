<!DOCTYPE html>
<html lang="tr">
<head>
  <html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  <!-- ⚡️ Mobil uyumluluk için -->
  <title>Sevgi Ölçer 💖</title>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    crossorigin="anonymous"
  />
  
  <style>
    :root {
      --bg: #fafafa;
      --text: #333;
      --track-bg: #ddd;
      --btn-bg: #ff4081;
      --btn-hover: #e33370;
      --primary: #ff4081;
      --overflow: #e53935;
      --tab-bg: #fff;
      --tab-color: #888;
      --tab-active-bg: var(--primary);
      --tab-active-color: #fff;
    }

    [data-theme="dark"] {
      --bg: #222;
      --text: #eee;
      --track-bg: #444;
      --btn-bg: #ff4081;
      --btn-hover: #e33370;
      --primary: #ff4081;
      --overflow: #e53935;
      --tab-bg: #333;
      --tab-color: #bbb;
      --tab-active-bg: var(--primary);
      --tab-active-color: #fff;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    .content {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      text-align: center;
    }

    .tabs {
      display: flex;
      justify-content: space-evenly;
      align-items: center;
      padding: 10px;
      background: var(--tab-bg);
      box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
    }

    .tab {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px 20px;
      background: var(--tab-bg);
      border-radius: 30px;
      color: var(--tab-color);
      cursor: pointer;
      transition: background 0.3s, color 0.3s, transform 0.2s;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    .tab.active {
      background: var(--tab-active-bg);
      color: var(--tab-active-color);
      transform: translateY(-2px);
    }

    .theme-toggle {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8px 12px;
      cursor: pointer;
      color: var(--text);
      transition: color 0.3s;
    }

    .theme-toggle:hover {
      color: var(--primary);
    }

    input[type="range"] {
      appearance: none;
      -webkit-appearance: none;
      width: 80%;
      height: 8px;
      background: transparent;
      cursor: pointer;
    }

    input[type="range"]::-webkit-slider-runnable-track {
      height: 8px;
      border-radius: 4px;
      background: var(--track-bg);
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      background: #fff;
      border: 3px solid var(--primary);
      border-radius: 50%;
      margin-top: -6px;
      transition: border-color 0.2s, transform 0.2s;
    }

    input.over-limit::-webkit-slider-runnable-track {
      background: var(--overflow);
    }

    input.over-limit::-webkit-slider-thumb {
      border-color: var(--overflow);
      animation: shake 0.3s ease-in-out;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25%      { transform: translateX(-4px); }
      50%      { transform: translateX(4px); }
      75%      { transform: translateX(-4px); }
    }

    .compare-btn {
      padding: 8px 24px;
      background: var(--btn-bg);
      color: #fff;
      border: none;
      border-radius: 30px;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      transition: background 0.2s, transform 0.1s;
    }

    .compare-btn:hover {
      background: var(--btn-hover);
    }

    .compare-btn:active {
      transform: scale(0.98);
    }

    .value {
      font-size: 1.4rem;
      color: var(--primary);
    }

    .warning {
      color: var(--overflow);
      font-weight: bold;
      visibility: hidden;
      animation: pop 0.3s ease both;
    }

    @keyframes pop {
      from { transform: scale(0.8); }
      to   { transform: scale(1); }
    }

    .heart-container {
      position: relative;
      width: 80%;
      height: 0;
      margin: 0 auto;
      pointer-events: none;
    }

    .heart {
      position: absolute;
      bottom: 0;
      color: var(--overflow);
      animation: rise 1s ease-out forwards;
      opacity: 0;
    }

    @keyframes rise {
      0%   { transform: translateY(0) scale(0.8); opacity: 1; }
      100% { transform: translateY(-80px) scale(1.2); opacity: 0; }
    }

    /* Sevgi sorusu başlığı */
    .love-meter h2 {
      color: var(--primary);
    }

   /* Normal arka planınızı buraya koyun */
body {
  
  /* Karanlık ve aydınlık temalar için arka plan rengi değişkeni kullanılıyor */
  transition: background 0.3s ease;
  
}

/* Slider değeri 11 olduğunda uygulanacak arka plan */
body.blue {
  background-color: rgba(88, 48, 167, 0.553);
}
/* Slider değeri 12 olduğunda uygulanacak arka plan */
body.glowing-blue {
  background-color: rgb(140, 0, 255);
}

body.void {
  background: #3d3d3d;
}

body.back{
  background: #f0f0f0;
}

/* Slider değeri 11 olduğunda uygulanacak arka plan */
body.blue-dark {
  background-color: rgb(68, 20, 42);
}
/* Slider değeri 12 olduğunda uygulanacak arka plan */
body.glowing-blue-dark   {
  background-color: rgb(146, 0, 39);
}

body.void-dark {
  background: #2a2a2a;
}

body.back-dark{
  background: #5e3535;
}


    .result, .special-page, .final-page {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
      font-size: 1.6rem;
      color: var(--primary);
    }

    .back-btn, .reward-btn {
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 1rem;
      cursor: pointer;
      border: 2px solid var(--primary);
      background: #fff;
      color: var(--primary);
      transition: background 0.2s, color 0.2s;
    }

    .back-btn:hover, .reward-btn:not([disabled]):hover {
      background: var(--primary);
      color: #fff;
    }

    .reward-btn[disabled] {
      opacity: 0.5;
      cursor: not-allowed;
    }

  @media (max-width: 600px) {
      /* Sekmeleri satır içine sığdır, gerekirse taşsın */
      .tabs {
        flex-wrap: wrap;
        padding: 6px;
      }
      .tab {
        flex: 1 1 33%;
        padding: 8px 0;
        font-size: 0.9rem;
      }
      /* İçerik kenar boşluklarını daralt */
      .content {
        padding: 10px;
      }
      /* Ölçer bloğunu dar ekranları sığdıracak şekilde esnet */
      .love-meter {
        padding: 0 10px;
      }
      /* Slider genişliği %100 olsun */
      input[type="range"] {
        width: 100%;
      }
      /* Buton tam genişlikte */
      .compare-btn {
        width: 100%;
        box-sizing: border-box;
      }
      /* Değer metni biraz ufak */
      .value {
        font-size: 1.2rem;
      }
      /* Tema geçiş ikonu için tıklama alanını büyüt */
      .theme-toggle {
        padding: 8px;
      }

      
    }

    /* 1. Define a shake-text animation */
@keyframes shake-text {
  0%, 100% { transform: translateX(0); }
  25%      { transform: translateX(-3px); }
  50%      { transform: translateX(3px); }
  75%      { transform: translateX(-3px); }
}

/* 2. Helper class to apply infinite shaking */
.shake-text {
  display: inline-block;        /* ensure transform works */
  animation: shake-text 0.3s ease-in-out infinite;
}
  
  </style>
</head>
<body data-theme="light">
  <div class="content" id="main-content">Merhaba! Bir sekme seç 😊<label for="love-range">Sevgi Ölçer</label>
  <input
    type="range"
    min="0"
    max="12"
    id="love-range"
    value="0"
  />
  </div>

  <div class="tabs">
    <div class="tab active" onclick="switchTab('Sevgi Ölçer', this)">
      <i class="fa-solid fa-heart"></i><span>Sevgi Ölçer</span>
    </div>
    <div class="tab" onclick="switchTab('Anılar', this)">
      <i class="fa-solid fa-camera-retro"></i><span>Anılar</span>
    </div>
    <div class="tab" onclick="switchTab('Mektup', this)">
      <i class="fa-solid fa-envelope"></i><span>Mektup</span>
    </div>
    <div id="theme-toggle" class="theme-toggle">
      <i class="fa-regular fa-moon"></i>
    </div>
  </div>

  <script>
    const LIMIT     = 10;
    const MAX_VALUE = 12;
    let lastValue   = 5;

    function switchTab(name, el) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      el.classList.add('active');
      const container = document.getElementById('main-content');
      if (name === 'Sevgi Ölçer') renderLoveMeter(container);
      else if (name === 'Anılar')  container.textContent = 'Anılar sekmesi seçildi.';
      else                          container.textContent = 'Mektup sekmesi seçildi.';
    }


    
    function renderLoveMeter(container) {
      container.innerHTML = `
        <div class="love-meter">
          <h2 class="question">Bana olan sevgine 10 üzerinden kaç verirsin?</h2>
          <div class="warning" id="warning">Aşk limiti aşıldı!</div>
          <div class="heart-container" id="heartContainer"></div>
          <input
            type="range"
            id="loveRange"
            role="slider"
            aria-label="Sevgi Ölçer"
            aria-valuemin="0"
            aria-valuemax="${MAX_VALUE}"
            aria-valuenow="${lastValue}"
            min="0"
            max="${MAX_VALUE}"
            step="1"
          />
          <div class="value" id="loveValue"></div>
          <button class="compare-btn" id="compareBtn">kıyasla</button>
        </div>`;
      const slider = document.getElementById('loveRange');
      const disp   = document.getElementById('loveValue');
      const warn   = document.getElementById('warning');
      const hearts = document.getElementById('heartContainer');
      const btn    = document.getElementById('compareBtn');

      slider.value = lastValue;
      updateUI();

      // helper: kalp animasyonu ekler
function emitHeart(slider, hearts) {
  const val = +slider.value;
  const pct = (val - slider.min) / (slider.max - slider.min);
  const heart = document.createElement('div');
  heart.className = 'heart fa fa-heart';
  heart.style.left = `calc(${pct * 100}% - 10px)`;
  heart.style.fontSize = `${1 + pct*4}rem`; // büyüklük değeri
  hearts.appendChild(heart);
  setTimeout(() => hearts.removeChild(heart), 1000);
}

function throttle(fn, wait) {
  let lastTime = 0;
  return function(...args) {
    const now = Date.now();
    if (now - lastTime >= wait) {
      fn.apply(this, args);
      lastTime = now;
    }

    if(args[0].value >= MAX_VALUE - 1) {
      document.body.classList.add('half-red');
    } else {
      document.body.classList.remove('half-red');
    }

  };
}

// helper: body’ye half-red sınıfını ekleyip çıkarır
function toggleHalfRed(value) {
  if (value >= MAX_VALUE - 1) {
    document.body.classList.add('half-red');
  } else {
    document.body.classList.remove('half-red');
  }
}

// emitHeart’i 10ms’e bir çalıştırmak için sarmalıyoruz
const throttledEmitHeart = throttle(emitHeart, 10);

// Sayfa yüklendiğinde depolanan değeri al, yoksa min değeri kullan
const savedValue = localStorage.getItem('loveMeterValue');
if (savedValue !== null) {
  slider.value = savedValue;
  lastValue = +savedValue;
  updateUI();
}


// slider listener’ını güncelliyoruz
slider.addEventListener('input', () => {
  if (slider.value != 0) {
    lastValue = +slider.value; 
  } 
  else {
    lastValue = ":(";
  }
  updateUI();

  // Değeri localStorage'a yaz
  localStorage.setItem('loveMeterValue', lastValue);


  if (document.documentElement.getAttribute('data-theme') === 'light') {

     // Aydınlık tema için arka plan rengi
    if (lastValue >= 1 && lastValue <= 10) {
      document.body.classList.remove('back-dark');
      document.body.classList.remove('void');
      document.body.classList.remove('blue');
      document.body.classList.remove('glowing-blue');
      document.body.classList.add('back');
      throttledEmitHeart(slider, hearts);
    }
  else if (lastValue == ":(") {
    document.body.classList.remove('back');
    document.body.classList.add('void');
  }
  else if (lastValue == 11) {
    document.body.classList.remove('back');
    document.body.classList.remove('void');
    document.body.classList.remove('glowing-blue');
    document.body.classList.add('blue');
  }
  else if( lastValue >= 12) {
    document.body.classList.remove('back');
    document.body.classList.remove('void');
    document.body.classList.remove('blue');
    document.body.classList.add('glowing-blue');
  } 
  else {
    document.body.classList.remove('back');
    document.body.classList.remove('void');
    document.body.classList.remove('blue');
    document.body.classList.remove('glowing-blue');
  }

  } 
  else {
    if (lastValue >= 1 && lastValue <= 10) {
    document.body.classList.remove('void-dark');
    document.body.classList.remove('blue-dark');
    document.body.classList.remove('glowing-blue-dark');
    document.body.classList.add('back-dark');
    throttledEmitHeart(slider, hearts);
  }
  else if (lastValue == ":(") {
    document.body.classList.remove('back-dark');
    document.body.classList.add('void-dark');
  }
  else if (lastValue == 11) {
    document.body.classList.remove('back-dark');
    document.body.classList.remove('void-dark');
    document.body.classList.remove('glowing-blue-dark');
    document.body.classList.add('blue-dark');
  }
  else if( lastValue >= 12) {
    document.body.classList.remove('back-dark');
    document.body.classList.remove('void-dark');
    document.body.classList.remove('blue-dark');
    document.body.classList.add('glowing-blue-dark');
  } 
  else {
    document.body.classList.remove('back-dark');
    document.body.classList.remove('void-dark');
    document.body.classList.remove('blue-dark');
    document.body.classList.remove('glowing-blue-dark');
  }
  }
  });



      btn.addEventListener('click', () => showResult(lastValue));

      function updateUI() {
  disp.textContent      = lastValue;
  disp.style.color      = lastValue > LIMIT ? 'var(--overflow)' : 'var(--primary)';
  warn.style.visibility = lastValue > LIMIT ? 'visible' : 'hidden';
  slider.classList.toggle('over-limit', lastValue > LIMIT);

  // ARIA: Slider’ın değerini güncelle
  slider.setAttribute('aria-valuenow', lastValue);

  // ✨ Shake the question & value when slider is max (12)
  const questionEl = document.querySelector('.question');
  questionEl.classList.toggle('shake-text', lastValue >= MAX_VALUE);
  disp.classList.toggle('shake-text', lastValue >= MAX_VALUE);

}

    }

    function showResult(value) {
      const container = document.getElementById('main-content');
      container.innerHTML = `
        <div class="result">
          <button class="back-btn" id="backBtn">Geri</button>
          <button class="reward-btn" id="rewardBtn" ${value === MAX_VALUE ? '' : 'disabled'}>Özel</button>
          <div>${value} mi verdin... Küstüm</div>
        </div>`;
      document.getElementById('backBtn').addEventListener('click', () => {
        switchTab('Sevgi Ölçer', document.querySelector('.tab'));
      });
      document.getElementById('rewardBtn').addEventListener('click', () => {
        if (value === MAX_VALUE) showSpecialPage();
        else alert('yeterli sevgi girilmedi');
      });
      
      
    }

    function showSpecialPage() {
      const container = document.getElementById('main-content');
      container.innerHTML = `
        <div class="special-page">
          <div>Benim sana olan sevgim 13</div>
          <button class="back-btn" id="nextSpecial">
            <i class="fa-solid fa-heart"></i>
          </button>
        </div>`;
      document.getElementById('nextSpecial').addEventListener('click', showNextPage);
    }

    function showNextPage() {
      const container = document.getElementById('main-content');
      container.innerHTML = `
        <div class="final-page">
          <div>Sonsuza dek kalbim seninle 💖</div>
        </div>`;
    }

    function applyTheme(theme) {
      document.documentElement.setAttribute('data-theme', theme);
    }
    function updateToggleIcon(theme) {
      const icon = document.querySelector('#theme-toggle i');
      icon.className = theme === 'light'
        ? 'fa-regular fa-moon'
        : 'fa-regular fa-sun';
    }
    function initThemeToggle() {
      const btn = document.getElementById('theme-toggle');
      const saved = localStorage.getItem('theme') || 'light';
      applyTheme(saved);
      updateToggleIcon(saved);

      btn.addEventListener('click', () => {
      const next = document.documentElement.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
      localStorage.setItem('theme', next);
      applyTheme(next);
      updateToggleIcon(next);

      // Arka plan rengini istediğiniz renge değiştirin
      // Örneğin: açık tema için mavi, koyu tema için mor
      if (next === 'light') {
        document.body.classList.add('back');
        document.body.classList.remove('back-dark');
      } else {
        document.body.classList.add('back-dark');
        document.body.classList.remove('back');
      }
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      initThemeToggle();
      document.querySelector('.tab.active').click();
    });
  </script>
</body>
</html>
